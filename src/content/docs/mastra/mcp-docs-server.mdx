---
title: "Mastra MCP 文档服务器"
description: "了解如何使用 Mastra MCP 文档服务器访问 Mastra 知识库"
sidebar_order: 1
category: "Mastra"
---

`@mastra/mcp-docs-server` 提供了一个 **MCP server**，可以让你的 IDE/agent 直接访问 Mastra 的知识库：

* 文档
* 代码示例
* 博客文章
* 更新日志

它支持任何兼容 MCP 的工具，比如 **Cursor、Windsurf、Cline、Claude Code、VSCode MCP** 等。

---

## 如何使用

```bash npm2yarn copy
# 全局安装（推荐）
npm install -g @mastra/mcp-docs-server

# 或作为项目依赖安装
npm install @mastra/mcp-docs-server
```

安装完成后，运行：

```bash copy
mcp-docs-server
```

这将启动一个本地 MCP 服务器（默认端口：4111）。

---

## 配置 MCP 客户端

要连接到这个服务器，你的 MCP 客户端需要指向以下 URL：

```
http://localhost:4111/api/mcp/mcpServer/mcp
```

例如，如果你使用 Mastra 的 `MCPClient`，可以这样配置：

```typescript copy
import { MCPClient } from "@mastra/mcp";

const client = new MCPClient({
  servers: {
    mastraDocs: {
      url: new URL("http://localhost:4111/api/mcp/mcpServer/mcp"),
    },
  },
});
```

---

## 提供的工具

服务器提供以下工具：

* `search_docs`: 搜索 Mastra 文档
* `get_doc`: 获取特定文档的内容
* `list_documents`: 列出所有可用的文档
* `get_examples`: 获取代码示例

---

## 自定义配置

你可以通过命令行参数自定义服务器的行为：

```bash copy
mcp-docs-server --port 4200 --host 0.0.0.0
```

---

## 与其他 MCP 工具结合使用

MCP 文档服务器可以与其他 MCP 工具结合使用，为你的 AI 代理提供全方位的支持：

```typescript copy
import { Agent } from "@mastra/core/agent";
import { openai } from "@ai-sdk/openai";
import { MCPClient } from "@mastra/mcp";

// 创建一个连接到多个 MCP 服务器的客户端
const mcp = new MCPClient({
  servers: {
    mastraDocs: {
      url: new URL("http://localhost:4111/api/mcp/mcpServer/mcp"),
    },
    // 可以添加其他 MCP 服务器
  },
});

// 创建使用 MCP 工具的代理
const agent = new Agent({
  name: "Mastra Assistant",
  instructions: `你是一个 Mastra 专家助手，可以访问 Mastra 文档。
  使用 search_docs 工具查找相关信息，使用 get_doc 获取详细内容。`,
  model: openai("gpt-4o"),
  tools: async () => await mcp.getTools(),
});
```

